build-image-docker:
  stage: build
  tags:
    - build
  image: docker:latest
  before_script:
    - docker info
    - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  script:
    - docker build -t adrianmanuel/spvending-manager:$CI_COMMIT_TAG .
    - docker push adrianmanuel/spvending-manager:$CI_COMMIT_TAG
    - echo "$DOCKERHUB_USERNAME"
    - echo "${#DOCKERHUB_PASSWORD}"
  rules:
    - if: '$CI_COMMIT_TAG'
